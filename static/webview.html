<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GoogleMap</title>
    <style>
        html, body {
            padding: 0;
            margin: 0;
            height: 100%;
        }

        #map_canvas {
            height: 100%;
        }
    </style>
</head>
<body>
<div id="map_canvas"></div>
<script>
    /* global loadGoogleMapsApi, googleMapsApiKey, loadJS, sendError, MapAnimator */
    const loader = loadJS.create();

    const mapsOptions = {};
    if (googleMapsApiKey) {
        mapsOptions.key = googleMapsApiKey;
    }

    loadGoogleMapsApi(mapsOptions).then(() => {
        return loader(['./MapGallery/scripts/v3_epoly.js', './MapGallery/scripts/MapAnimator.js']);
    }).then(() => {
        console.log('epoly loaded');
        MapAnimator.tick = 40;
        MapAnimator.step = 1200;
        MapAnimator.animationTriggerEvent = 'center_changed';
        MapAnimator.initialize();
    }).catch((err) => {
        sendError(err);
    });

    function showRoute(route) {
        MapAnimator.showRoute(route, (err) => {
            sendError(err);
        });
    }
</script>
</body>
</html>
