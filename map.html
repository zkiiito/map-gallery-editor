<!DOCTYPE html>
<html>
<head>
    <title>Simple Map</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <style>
        /* Always set the map height explicitly to define the size of the div
         * element that contains the map. */
        #map {
            height: 500px;
            width: 500px;
        }
        /* Optional: Makes the sample page fill the window. */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
<div id="map"></div>
<div>
    <form>
        <label>from: <input id="routeFrom" type="text" value="Budapest"></label><br>
        <label>to: <input id="routeTo" type="text" value="PusztamagyarÃ³d"></label><br>
        <label>speed: <input id="routeSpeed" type="range" min="1" max="100" value="5"></label><br>
        <label>mode: <select id="routeMode">
            <option value="DRIVING" selected>driving</option>
            <option value="FLYING">flying</option>
            <option value="WALKING">walking</option>
        </select></label>

        <button type="button" id="routeTest" onclick="start()">TEST</button>
    </form>

</div>
<script>
    function initMap() {
        MapAnimator.mapdiv = 'map';
        MapAnimator.animationTriggerEvent = 'center_changed';
        MapAnimator.initialize();

        start();
    }

    function start() {
        // position will be between 0 and 100
        var minp = 1;
        var maxp = 100;

        // The result should be between 100 an 10000000
        var minv = Math.log(1000);
        var maxv = Math.log(10000000);

        // calculate adjustment factor
        var scale = (maxv-minv) / (maxp-minp);
        var position = parseInt(document.getElementById('routeSpeed').value);
        var speed= Math.exp(minv + scale*(position-minp));

        MapAnimator.showRoute({
            from: document.getElementById('routeFrom').value,
            to: document.getElementById('routeTo').value,
            speed: speed,
            mode: document.getElementById('routeMode').value,
        });
    }
</script>
<script src="MapAnimator.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?callback=initMap&key=AIzaSyBxibPU_2mMsI8c5o0wVeG6uBnxps0c6wE"></script>
<script src="v3_epoly.js"></script>
</body>
</html>